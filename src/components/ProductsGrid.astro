---
import ProductCard, { type ProductData } from './ProductCard.astro';

const products: ProductData[] = [
  {
    name: 'Lettucemeet',
    description: 'Scheduling group meetings made easy. A full-stack web application helping teams find the perfect meeting time. Built as a University Capstone project, now maintained and grown strategically with 3 co-founders.',
    techStack: ['React', 'Node.js', 'Express', 'PostgreSQL', 'Docker', 'AWS ECS', 'SASS'],
    liveUrl: 'https://lettucemeet.com',
  },
  {
    name: 'Staunq Trading Chatbot',
    description: 'Cryptocurrency + AI Chatbot App combining real-time market data with conversational AI. Integrated with OpenAI\'s GPT-3 and Binance API for latest candlestick and orderbook data, enabling natural language access to crypto markets.',
    techStack: ['Next.js', 'React', 'OpenAI GPT-3', 'Binance API', 'Vercel', 'Serverless Functions'],
    githubUrl: 'https://github.com/ShreyK/staunq',
  },
  {
    name: 'Market Predictor Neural Network',
    description: 'Machine learning project using TensorFlow and Keras LSTM-RNN models to predict cryptocurrency prices. Trained on 4 years of daily BTC and ETH data with pandas and sklearn for data cleansing, filtering, and normalization.',
    techStack: ['Python', 'TensorFlow', 'Keras LSTM', 'pandas', 'sklearn', 'NumPy'],
    githubUrl: 'https://github.com/ShreyK/mp',
  },
];
---

<section id="products" class="products-section">
  <!-- Decorative elements -->
  <div class="products-bg" aria-hidden="true">
    <div class="orb orb-blue"></div>
    <div class="orb orb-purple"></div>
  </div>

  <div class="products-inner">
    <!-- Section Header -->
    <div class="products-header">
      <h2 class="products-title">Products</h2>
      <p class="products-subtitle">Passion projects that scaled to real-world impact</p>
    </div>

    <!-- Products Grid -->
    <div class="products-grid">
      {products.map((product) => (
        <ProductCard {...product} />
      ))}
    </div>
  </div>
</section>

<style>
  .products-section {
    padding: 6rem 1rem;
    background: transparent;
    position: relative;
    overflow: hidden;
  }

  @media (min-width: 640px) {
    .products-section { padding: 6rem 1.5rem; }
  }

  @media (min-width: 1024px) {
    .products-section { padding: 6rem 2rem; }
  }

  .products-bg {
    position: absolute;
    inset: 0;
    opacity: 0.07;
    pointer-events: none;
  }

  .orb {
    position: absolute;
    border-radius: 9999px;
    filter: blur(64px);
  }

  .orb-blue {
    top: 5rem;
    left: 2.5rem;
    width: 16rem;
    height: 16rem;
    background: var(--color-accent-blue);
  }

  .orb-purple {
    bottom: 5rem;
    right: 2.5rem;
    width: 24rem;
    height: 24rem;
    background: var(--color-accent-purple);
  }

  .products-inner {
    max-width: 72rem;
    margin: 0 auto;
    position: relative;
    z-index: 10;
  }

  .products-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  @media (min-width: 768px) {
    .products-header { margin-bottom: 5rem; }
  }

  .products-title {
    font-size: 2.25rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: var(--color-text-primary);
  }

  @media (min-width: 768px) {
    .products-title { font-size: 3rem; }
  }

  .products-subtitle {
    font-size: 1.25rem;
    color: var(--color-text-secondary);
    max-width: 42rem;
    margin: 0 auto;
    line-height: 1.625;
  }

  .products-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: stretch;
  }

  @media (min-width: 768px) {
    .products-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (min-width: 1024px) {
    .products-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2.5rem;
    }
  }
</style>

<script>
  // GSAP ScrollTrigger animations for product cards
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if (!prefersReducedMotion) {
    const productCards = document.querySelectorAll('.product-card');
    
    productCards.forEach((card, index) => {
      gsap.fromTo(card,
        {
          opacity: 0,
          y: 50,
          scale: 0.95,
        },
        {
          opacity: 1,
          y: 0,
          scale: 1,
          duration: 0.8,
          delay: index * 0.2,
          ease: 'power3.out',
          scrollTrigger: {
            trigger: card,
            start: 'top 85%',
            end: 'top 60%',
            toggleActions: 'play none none none',
          },
        }
      );
    });
  } else {
    gsap.set('.product-card', { opacity: 1, y: 0 });
  }
</script>
