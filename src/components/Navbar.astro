---
const navItems = [
  { href: '/#hero', label: 'Home' },
  { href: '/#experience', label: 'Experience' },
  // { href: '/#about', label: 'About' },
  { href: '/#products', label: 'Products' },
  { href: '/#games', label: 'Games' },
  { href: '/blog', label: 'Blog' },
  { href: '/#contact', label: 'Contact' },
];
---

<nav class="site-nav glassmorphism">
  <div class="nav-inner">
    <div class="nav-bar">
      <!-- Logo -->
      <a href="/" class="nav-logo">SK</a>

      <!-- Desktop Navigation -->
      <div class="desktop-nav">
        {navItems.map((item) => (
          <a href={item.href} class="nav-link">{item.label}</a>
        ))}
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="mobile-menu-btn"
        aria-label="Toggle menu"
        aria-expanded="false"
      >
        <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            id="menu-icon-open"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
          <path
            id="menu-icon-close"
            class="hidden"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="mobile-menu hidden glassmorphism">
    <div class="mobile-nav">
      {navItems.map((item) => (
        <a href={item.href} class="mobile-nav-link">{item.label}</a>
      ))}
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');
  const iconOpen = document.getElementById('menu-icon-open');
  const iconClose = document.getElementById('menu-icon-close');

  if (button && menu && iconOpen && iconClose) {
    button.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      
      button.setAttribute('aria-expanded', (!isExpanded).toString());
      menu.classList.toggle('hidden');
      iconOpen.classList.toggle('hidden');
      iconClose.classList.toggle('hidden');
    });

    // Close menu when clicking on a link
    const menuLinks = menu.querySelectorAll('a');
    menuLinks.forEach((link) => {
      link.addEventListener('click', () => {
        menu.classList.add('hidden');
        iconOpen.classList.remove('hidden');
        iconClose.classList.add('hidden');
        button.setAttribute('aria-expanded', 'false');
      });
    });
  }
</script>

<style>
  /* Ensure JS-toggled .hidden works after Tailwind is removed */
  :global(.hidden) {
    display: none !important;
  }

  .site-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    border-bottom: 1px solid oklch(from var(--color-accent-blue) l c h / 0.2);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    animation: slideDown 0.5s ease-out;
  }

  .nav-inner {
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1rem;
  }

  @media (min-width: 640px) {
    .nav-inner { padding: 0 1.5rem; }
  }

  @media (min-width: 1024px) {
    .nav-inner { padding: 0 2rem; }
  }

  .nav-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 4rem;
  }

  @media (min-width: 768px) {
    .nav-bar { height: 5rem; }
  }

  .nav-logo {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-text-primary);
    transition: color 150ms ease;
  }

  .nav-logo:hover {
    color: var(--color-accent-cyan);
  }

  @media (min-width: 768px) {
    .nav-logo { font-size: 1.5rem; }
  }

  .desktop-nav {
    display: none;
    align-items: center;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .desktop-nav {
      display: flex;
      gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .desktop-nav { gap: 2rem; }
  }

  .nav-link {
    color: var(--color-text-secondary);
    font-weight: 500;
    white-space: nowrap;
    transition: color 150ms ease;
  }

  .nav-link:hover {
    color: var(--color-accent-blue);
  }

  .mobile-menu-btn {
    display: block;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-text-primary);
    transition: color 150ms ease;
    padding: 0;
  }

  .mobile-menu-btn:hover {
    color: var(--color-accent-blue);
  }

  @media (min-width: 768px) {
    .mobile-menu-btn { display: none; }
  }

  .menu-icon {
    width: 1.5rem;
    height: 1.5rem;
  }

  .mobile-menu {
    border-top: 1px solid oklch(from var(--color-accent-blue) l c h / 0.2);
  }

  .mobile-nav {
    padding: 1.5rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .mobile-nav-link {
    display: block;
    color: var(--color-text-secondary);
    padding: 0.5rem 0;
    transition: color 150ms ease;
  }

  .mobile-nav-link:hover {
    color: var(--color-accent-blue);
  }

  @keyframes slideDown {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
</style>
